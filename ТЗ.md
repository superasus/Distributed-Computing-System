1. # **УСЛОВНЫЕ ОБОЗНАЧЕНИЯ**
Вычислитель – расположенный в ЛВС вычислительный элемент СРВ, непосредственно реализующий регламентированный в рамках данного ТЗ функционал;

Задачник – внешний узел, подключаемый к одному из вычислителей СРВ.

ПО – Программное обеспечение

СРВ – Система распределенных вычислений;

ЛВС – локальная вычислительная сеть;


2. # **ОПИСАНИЕ СИСТЕМЫ**

СРВ должен быть представлен в виде сильно связного графа, узлами которого являются расположенные в одной ЛВС одинаковые вычислители, а связи между ними – ветвями. Количество вычислителей в СРВ не регламентировано. Функционал, который должен быть реализован в элементах СРВ, представлен в разделе (3.2).

Количество вычислителей СРВ может изменяться динамически до выполнения вычислений в рамках задачи, поставленной Задачником. Во время расчета гарантируется, что количество вычислителей постоянно. Вычислители могут находиться на разных рабочих машинах в одной ЛВС.

Для взаимодействия с СРВ задачник должен подключаться к одному из вычислителей. Гарантируется, что задачнику известен ip-адрес хотя бы одного расчетного узла системы для установки соединения. Функционал задачника представлен в разделе (3.2).

Внешнее взаимодействие с СРВ должно быть реализовано при помощи интерфейса командной строки.

Связь СРВ с задачником и между вычислителями осуществляется в ЛВС по протоколу TCP/IP.


3. # **ВЫПОЛНЯЕМЫЕ ПРОЦЕДУРЫ**
ПО должно быть представлено в виде двух исполняемых файлов. Первый отвечает за регистрацию и создание вычислителей в ЛВС, второй – за создание задачника. Для каждого из модулей предусмотрен свой конфигурационный файл.
3.1 ## **ЗАДАЧНИК**
   Функционал:

3.1.1 Сериализация исходных данных для выполнения запроса расчета в СРВ. Описание формата данных представлено в разделе (4);
3.1.2 Парсинг функции, которую необходимо применить к исходным данным;
3.1.3 Установка соединения с СРВ посредством подключения к одному из вычислителей;
3.1.4 Десериализация полученного в результате расчета СРВ ответа;
3.1.5 Разъединение связи с СРВ.

Управление задачником осуществляется при помощи интерфейса командной строки. Интерфейс должен предоставлять возможность подключения к СРВ, ввода массива исходных данных из потока, а также из текстового файла, определение требуемого алгоритма и отключения от СРВ.

Гарантируется, что одновременно к СРВ может подключиться только один задачник.
3.2 ## **ВЫЧИСЛИТЕЛИ**
   Как было отмечено ранее, все вычислители в СРВ имеют одинаковую реализацию и функционал:

3.2.1 Непосредственное выполнение набора предусмотренных алгоритмов над массивом чисел – вычислительное ядро;
3.2.2 В случае подключения к вычислителю задачника:
3.2.3 Установка соединения с задачником;
3.2.4 Обмен информацией с задачником:
      А) Десериализация исходных данных, полученных от задачника;
      Б) Сериализация выходных данных, отправляемых задачнику в качестве ответа;
3.2.5 Опрос валидности соединения с другими вычислителями, при потере соединения выполнить попытку его восстановления;
3.2.6 Реализация Map/Reduce;
3.2.7 Предварительная обработка входного десериализованного массива данных, полученных от задачника – оценка размерности. 
3.2.8 Разбиение входного массива на количество кусков, равное количеству вычислителей в СРВ. Размерность кусков массива для каждого из вычислителей в сети определяется его производительностью и пропускной способностью канала к нему;
3.2.9 Сериализация кусков массива для передачи другим вычислителям;
3.2.10 Десериализация полученных ответов от других вычислителей;
3.2.11 Сбор полученных от других вычислителей данных в единый массив в том порядке, который был установлен изначально.
3.2.12 Анализ собственной вычислительной производительности, а также пропускной способности каналов с другими вычислителями в сети;
3.2.13 Сериализация входных и выходных данных;
3.2.14 Сетевые функции – установка соединения с СРВ, поиск других расчетных ядер в сети (discovery service).

Алгортимы, выполняемые в вычислительных ядрах, представляют собой простые тригонометрические функции.


4. # **ФОРМАТ ВХОДНЫХ И ВЫХОДНЫХ ДАННЫХ**
Входной массив – массив данных неопределённой длины, содержащий числа с плавающей запятой типа float. Для параллельного расчета СРВ входной массив должен разбиваться на количество кусков, равное количеству расчетных ядер.

Входные и выходные данные представлены в формате JSON.
5. # **БАЗОВЫЙ СЦЕНАРИЙ ТЕСТИРОВАНИЯ**
   5.1 ## **Unit-тестирование**
      Необходимо реализовать тестирование классов СРВ:
      А) тестировать корректность вычислений для положительных, отрицательных чисел и для нуля.
      Б) тест с делением на ноль(должно возникать исключение)
      В) тест, при котором значение функции стремится к бесконечности(например, tg(П/2)). Необходимо, чтобы не произошло переполнение типа double

   5.2 ## **Интеграционное тестирование**
      Тестирование функциональности СРВ (объединение классов)

   5.3 ## **Mock-тестирование**
      Тестирование реальных расчетных процессов, в которых экземпляры классов, которые тестировать не надо, заменяются классами-дублерами.

      А) В роли вычислителя выступает mock-объект. С помощью теста мы проверяем, пришли ли данные от задачника к главному вычислителю(с которым связан задачник)

      Б) В роли вычислителей выступают mock-объекты. С помощью теста мы проверяем, пришли ли данные от главного вычислителя(с которым связан задачник) ко всем остальным вычислителям
